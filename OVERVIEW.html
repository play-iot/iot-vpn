<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<title>PlayiO VPN overview</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>PlayiO VPN overview</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#external-connection">External connection</a></li>
<li><a href="#development-script">Development script</a>
<ul class="sectlevel2">
<li><a href="#requirements">Requirements</a></li>
</ul>
</li>
<li><a href="#internal-communication">Internal communication</a></li>
<li><a href="#virtual-hub-setup">Virtual Hub setup</a>
<ul class="sectlevel2">
<li><a href="#ip-network">IP network</a></li>
<li><a href="#user-authentication">User authentication</a></li>
<li><a href="#virtual-hub-security-policy">Virtual Hub security policy</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="external-connection"><a class="anchor" href="#external-connection"></a>External connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>VPN infrastructure provide private tunnel via Internet connection to our servers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Our client will run on beagleboard device, which is running Debian on <code>armv7</code>, testing client scripts may need a real device.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="development-script"><a class="anchor" href="#development-script"></a>Development script</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is collection of script to bootstrap, manage, setup softether-vpn server.</p>
</div>
<div class="sect2">
<h3 id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.softether.org/4-docs/1-manual/4._SoftEther_VPN_Client_Manual/4.4_Making_Connection_to_VPN_Server#4.4.3_Connection_Via_HTTP_Proxy_Server"><code>Connection via HTTPS Proxy</code></a> VPN connection uses <code>SoftEther VPN protocol</code> over <code>HTTPS</code>, backed by <code>reverse proxy</code>, <code>SSL</code> is provided by <a href="https://letsencrypt.org/"><code>Letsencrypt</code></a></p>
</li>
<li>
<p>VPN secure connection with <a href="https://www.softether.org/4-docs/1-manual/4._SoftEther_VPN_Client_Manual/4.4_Making_Connection_to_VPN_Server#4.4.5_Server-Certificate_Verification">Certificate Verification</a>.
VPN server certificate is generated by us that is <a href="https://en.wikipedia.org/wiki/Root_certificate#targetText=In%20cryptography%20and%20computer%20security,public%20key%20infrastructure%20(PKI)."><code>Root CA</code></a></p>
<div class="ulist">
<ul>
<li>
<p>Use <code>TLS 1.2</code></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Cipher_suite">Cipher suite</a>: <code>ECDHE-RSA-AES256-GCM-SHA384</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="internal-communication"><a class="anchor" href="#internal-communication"></a>Internal communication</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>VPN connection type: <a href="https://www.softether.org/4-docs/1-manual/1._SoftEther_VPN_Overview/1.4_VPN_Processing_Principle_and_Communication_Method#1.4.7_Remote_Access_VPN">Remote Access VPN</a></p>
</li>
<li>
<p>Separate customers to <code>Virtual Hubs</code>.</p>
</li>
<li>
<p><code>Virtual Hubs</code> are isolated to each other.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="virtual-hub-setup"><a class="anchor" href="#virtual-hub-setup"></a>Virtual Hub setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ip-network"><a class="anchor" href="#ip-network"></a>IP network</h3>
<div class="paragraph">
<p>Enable <code>secureNAT</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>DHCP IP scope (NAT subnet): <code>10/8 subnet</code></p>
</li>
<li>
<p>Hub virtual IP (virtual NAT gateway): <code>10.0.0.1</code></p>
</li>
<li>
<p>IP configuration push to client:</p>
<div class="ulist">
<ul>
<li>
<p><code>Corporate DNS</code>: IP of Corp&#8217;s DNS servers</p>
</li>
<li>
<p>Optional Public Google DNS <code>8.8.8.8</code></p>
</li>
<li>
<p>Static routes:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Internal resource</th>
<th class="tableblock halign-left valign-top">Destination network</th>
<th class="tableblock halign-left valign-top">Net mask</th>
<th class="tableblock halign-left valign-top">Gateway</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corporate DNS server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;DNS Server IP&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.255.255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corporate VPN subnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192.168.0.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">255.255.255.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.1</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
*And all necessary routes to <code>internal resource subnets</code> are defined for a customer separately.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="user-authentication"><a class="anchor" href="#user-authentication"></a>User authentication</h3>
<div class="ulist">
<ul>
<li>
<p>Define groups and users for each customer</p>
</li>
<li>
<p>Authentication method</p>
<div class="ulist">
<ul>
<li>
<p>Edge device: <a href="https://www.softether.org/4-docs/1-manual/2._SoftEther_VPN_Essential_Architecture/2.2_User_Authentication#2.2.6_Signed_Certificate_Authentication"><code>Signed certificate</code></a> that is signed by our <a href="#external-connection">Root CA</a></p>
<div class="ulist">
<ul>
<li>
<p>Each device has one dedicated user</p>
</li>
<li>
<p>Each device has each <code>VPN certificate</code> key</p>
</li>
<li>
<p>Each device has each <code>ssh</code> public/private key</p>
</li>
</ul>
</div>
</li>
<li>
<p>(Optional) Interactive user: <code>basic password</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="virtual-hub-security-policy"><a class="anchor" href="#virtual-hub-security-policy"></a>Virtual Hub security policy</h3>
<div class="paragraph">
<p>Status: <code>WIP</code></p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><input type="checkbox" data-item-complete="0"> Define hub admin security policy</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> Define security policy and apply to group</p>
</li>
<li>
<p><input type="checkbox" data-item-complete="0"> Define hub extended options</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-08-29 08:57:06 UTC
</div>
</div>
</body>
</html>